"use strict";const X=require("electron"),R=require("path"),ft=require("fs"),Kt=require("constants"),Qt=require("stream"),Xt=require("util"),Zt=require("assert"),{ipcMain:$e,BrowserWindow:be}=require("electron"),en=()=>{$e.on("window-min",e=>{const t=e.sender;be.fromWebContents(t).minimize()}),$e.on("window-max",e=>{const t=e.sender,n=be.fromWebContents(t);n.isMaximized()?n.unmaximize():n.maximize()}),$e.on("window-close",e=>{const t=e.sender;be.fromWebContents(t).close()})},tn=require("path"),Ie=class q{constructor(){this.getWindowById=t=>X.BrowserWindow.fromId(t),this.defaultConfig={id:null,title:"",width:null,height:null,minWidth:null,minHeight:null,route:"",resizable:!0,maximize:!1,backgroundColor:"#eee",data:null,isMultiWindow:!1,isMainWin:!1,parentId:null,modal:!0},this.defaultOptions={width:900,height:700,center:!0,frame:!1,show:!0,transparent:!0,maxWidth:null,maxHeight:null,minWidth:680,minHeight:500,backgroundColor:"rgba(0,0,0,0)",autoHideMenuBar:!0,resizable:!0,minimizable:!0,maximizable:!0,modal:!0,parent:null,webPreferences:{contextIsolation:!0,webSecurity:!1,nodeIntegration:!0,preload:tn.join(__dirname,"../preload/preload.js")}}}createWindow(t,n){var f;let i=0;if(q.group.some((c,u)=>(i=u,c.route===t.route))){console.info("window is already created"),(f=this.getWindowById(i+1))==null||f.blur();return}let r=Object.assign({},this.defaultConfig,t),o=Object.assign({},this.defaultOptions,n);!r.isMainWin&&q.main&&(o.parent=q.main);let a=new X.BrowserWindow(o);console.log("window id:"+a.id),q.group[a.id-1]={windowId:a.id,route:r.route},r.maximize&&r.resizable&&a.maximize(),r.isMainWin&&(q.main&&(console.info("main window already created"),delete q.group[0],q.main.close()),q.main=a);let s=this;a.on("close",()=>{q.group.forEach((c,u)=>{this.getWindowById(c.windowId)==a&&delete q.group[u],a==s.main&&X.app.quit()}),a.setOpacity(0)});let y;return X.app.isPackaged?a.loadFile(R.join(__dirname,"../../dist/index.html"),{hash:r.route}):(y=r.route?`http://localhost:${process.env.VITE_DEV_SERVER_PORT}/#${r.route}`:`http://localhost:${process.env.VITE_DEV_SERVER_PORT}/#`,a.loadURL(y)),console.info("new window address -> ",y),a.setMenu(null),X.globalShortcut.register("CommandOrControl+Shift+i",function(){a.webContents.openDevTools()}),a.once("ready-to-show",()=>{a.show()}),a}};Ie.group=[];Ie.main=null;let yt=Ie;var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j={},x={};x.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((n,i)=>{t.push((r,o)=>r!=null?i(r):n(o)),e.apply(this,t)})},"name",{value:e.name})};x.fromPromise=function(e){return Object.defineProperty(function(...t){const n=t[t.length-1];if(typeof n!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(i=>n(null,i),n)},"name",{value:e.name})};var H=Kt,nn=process.cwd,he=null,rn=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return he||(he=nn.call(process)),he};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var Be=process.chdir;process.chdir=function(e){he=null,Be.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Be)}var on=an;function an(e){H.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||n(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=i(e.chmod),e.fchmod=i(e.fchmod),e.lchmod=i(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=r(e.chmodSync),e.fchmodSync=r(e.fchmodSync),e.lchmodSync=r(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=y(e.statSync),e.fstatSync=y(e.fstatSync),e.lstatSync=y(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,u,m){m&&process.nextTick(m)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,u,m,l){l&&process.nextTick(l)},e.lchownSync=function(){}),rn==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function u(m,l,d){var $=Date.now(),v=0;c(m,l,function E(A){if(A&&(A.code==="EACCES"||A.code==="EPERM"||A.code==="EBUSY")&&Date.now()-$<6e4){setTimeout(function(){e.stat(l,function(N,ie){N&&N.code==="ENOENT"?c(m,l,E):d(A)})},v),v<100&&(v+=10);return}d&&d(A)})}return Object.setPrototypeOf&&Object.setPrototypeOf(u,c),u}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function u(m,l,d,$,v,E){var A;if(E&&typeof E=="function"){var N=0;A=function(ie,qe,Je){if(ie&&ie.code==="EAGAIN"&&N<10)return N++,c.call(e,m,l,d,$,v,A);E.apply(this,arguments)}}return c.call(e,m,l,d,$,v,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(u,c),u}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(u,m,l,d,$){for(var v=0;;)try{return c.call(e,u,m,l,d,$)}catch(E){if(E.code==="EAGAIN"&&v<10){v++;continue}throw E}}}(e.readSync);function t(c){c.lchmod=function(u,m,l){c.open(u,H.O_WRONLY|H.O_SYMLINK,m,function(d,$){if(d){l&&l(d);return}c.fchmod($,m,function(v){c.close($,function(E){l&&l(v||E)})})})},c.lchmodSync=function(u,m){var l=c.openSync(u,H.O_WRONLY|H.O_SYMLINK,m),d=!0,$;try{$=c.fchmodSync(l,m),d=!1}finally{if(d)try{c.closeSync(l)}catch{}else c.closeSync(l)}return $}}function n(c){H.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(u,m,l,d){c.open(u,H.O_SYMLINK,function($,v){if($){d&&d($);return}c.futimes(v,m,l,function(E){c.close(v,function(A){d&&d(E||A)})})})},c.lutimesSync=function(u,m,l){var d=c.openSync(u,H.O_SYMLINK),$,v=!0;try{$=c.futimesSync(d,m,l),v=!1}finally{if(v)try{c.closeSync(d)}catch{}else c.closeSync(d)}return $}):c.futimes&&(c.lutimes=function(u,m,l,d){d&&process.nextTick(d)},c.lutimesSync=function(){})}function i(c){return c&&function(u,m,l){return c.call(e,u,m,function(d){f(d)&&(d=null),l&&l.apply(this,arguments)})}}function r(c){return c&&function(u,m){try{return c.call(e,u,m)}catch(l){if(!f(l))throw l}}}function o(c){return c&&function(u,m,l,d){return c.call(e,u,m,l,function($){f($)&&($=null),d&&d.apply(this,arguments)})}}function a(c){return c&&function(u,m,l){try{return c.call(e,u,m,l)}catch(d){if(!f(d))throw d}}}function s(c){return c&&function(u,m,l){typeof m=="function"&&(l=m,m=null);function d($,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),l&&l.apply(this,arguments)}return m?c.call(e,u,m,d):c.call(e,u,d)}}function y(c){return c&&function(u,m){var l=m?c.call(e,u,m):c.call(e,u);return l&&(l.uid<0&&(l.uid+=4294967296),l.gid<0&&(l.gid+=4294967296)),l}}function f(c){if(!c||c.code==="ENOSYS")return!0;var u=!process.getuid||process.getuid()!==0;return!!(u&&(c.code==="EINVAL"||c.code==="EPERM"))}}var ze=Qt.Stream,cn=sn;function sn(e){return{ReadStream:t,WriteStream:n};function t(i,r){if(!(this instanceof t))return new t(i,r);ze.call(this);var o=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,r=r||{};for(var a=Object.keys(r),s=0,y=a.length;s<y;s++){var f=a[s];this[f]=r[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(c,u){if(c){o.emit("error",c),o.readable=!1;return}o.fd=u,o.emit("open",u),o._read()})}function n(i,r){if(!(this instanceof n))return new n(i,r);ze.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var o=Object.keys(r),a=0,s=o.length;a<s;a++){var y=o[a];this[y]=r[y]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}var ln=fn,un=Object.getPrototypeOf||function(e){return e.__proto__};function fn(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:un(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}var F=ft,yn=on,mn=cn,dn=ln,ye=Xt,T,we;typeof Symbol=="function"&&typeof Symbol.for=="function"?(T=Symbol.for("graceful-fs.queue"),we=Symbol.for("graceful-fs.previous")):(T="___graceful-fs.queue",we="___graceful-fs.previous");function hn(){}function mt(e,t){Object.defineProperty(e,T,{get:function(){return t}})}var G=hn;ye.debuglog?G=ye.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(G=function(){var e=ye.format.apply(ye,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});if(!F[T]){var wn=Pe[T]||[];mt(F,wn),F.close=function(e){function t(n,i){return e.call(F,n,function(r){r||He(),typeof i=="function"&&i.apply(this,arguments)})}return Object.defineProperty(t,we,{value:e}),t}(F.close),F.closeSync=function(e){function t(n){e.apply(F,arguments),He()}return Object.defineProperty(t,we,{value:e}),t}(F.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){G(F[T]),Zt.equal(F[T].length,0)})}Pe[T]||mt(Pe,F[T]);var ne=_e(dn(F));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!F.__patched&&(ne=_e(F),F.__patched=!0);function _e(e){yn(e),e.gracefulify=_e,e.createReadStream=qe,e.createWriteStream=Je;var t=e.readFile;e.readFile=n;function n(h,S,p){return typeof S=="function"&&(p=S,S=null),C(h,S,p);function C(I,O,k,P){return t(I,O,function(g){g&&(g.code==="EMFILE"||g.code==="ENFILE")?Q([C,[I,O,k],g,P||Date.now(),Date.now()]):typeof k=="function"&&k.apply(this,arguments)})}}var i=e.writeFile;e.writeFile=r;function r(h,S,p,C){return typeof p=="function"&&(C=p,p=null),I(h,S,p,C);function I(O,k,P,g,_){return i(O,k,P,function(b){b&&(b.code==="EMFILE"||b.code==="ENFILE")?Q([I,[O,k,P,g],b,_||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=a);function a(h,S,p,C){return typeof p=="function"&&(C=p,p=null),I(h,S,p,C);function I(O,k,P,g,_){return o(O,k,P,function(b){b&&(b.code==="EMFILE"||b.code==="ENFILE")?Q([I,[O,k,P,g],b,_||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=y);function y(h,S,p,C){return typeof p=="function"&&(C=p,p=0),I(h,S,p,C);function I(O,k,P,g,_){return s(O,k,P,function(b){b&&(b.code==="EMFILE"||b.code==="ENFILE")?Q([I,[O,k,P,g],b,_||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var f=e.readdir;e.readdir=u;var c=/^v[0-5]\./;function u(h,S,p){typeof S=="function"&&(p=S,S=null);var C=c.test(process.version)?function(k,P,g,_){return f(k,I(k,P,g,_))}:function(k,P,g,_){return f(k,P,I(k,P,g,_))};return C(h,S,p);function I(O,k,P,g){return function(_,b){_&&(_.code==="EMFILE"||_.code==="ENFILE")?Q([C,[O,k,P],_,g||Date.now(),Date.now()]):(b&&b.sort&&b.sort(),typeof P=="function"&&P.call(this,_,b))}}}if(process.version.substr(0,4)==="v0.8"){var m=mn(e);E=m.ReadStream,N=m.WriteStream}var l=e.ReadStream;l&&(E.prototype=Object.create(l.prototype),E.prototype.open=A);var d=e.WriteStream;d&&(N.prototype=Object.create(d.prototype),N.prototype.open=ie),Object.defineProperty(e,"ReadStream",{get:function(){return E},set:function(h){E=h},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return N},set:function(h){N=h},enumerable:!0,configurable:!0});var $=E;Object.defineProperty(e,"FileReadStream",{get:function(){return $},set:function(h){$=h},enumerable:!0,configurable:!0});var v=N;Object.defineProperty(e,"FileWriteStream",{get:function(){return v},set:function(h){v=h},enumerable:!0,configurable:!0});function E(h,S){return this instanceof E?(l.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function A(){var h=this;ge(h.path,h.flags,h.mode,function(S,p){S?(h.autoClose&&h.destroy(),h.emit("error",S)):(h.fd=p,h.emit("open",p),h.read())})}function N(h,S){return this instanceof N?(d.apply(this,arguments),this):N.apply(Object.create(N.prototype),arguments)}function ie(){var h=this;ge(h.path,h.flags,h.mode,function(S,p){S?(h.destroy(),h.emit("error",S)):(h.fd=p,h.emit("open",p))})}function qe(h,S){return new e.ReadStream(h,S)}function Je(h,S){return new e.WriteStream(h,S)}var Gt=e.open;e.open=ge;function ge(h,S,p,C){return typeof p=="function"&&(C=p,p=null),I(h,S,p,C);function I(O,k,P,g,_){return Gt(O,k,P,function(b,Ui){b&&(b.code==="EMFILE"||b.code==="ENFILE")?Q([I,[O,k,P,g],b,_||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}return e}function Q(e){G("ENQUEUE",e[0].name,e[1]),F[T].push(e),Te()}var me;function He(){for(var e=Date.now(),t=0;t<F[T].length;++t)F[T][t].length>2&&(F[T][t][3]=e,F[T][t][4]=e);Te()}function Te(){if(clearTimeout(me),me=void 0,F[T].length!==0){var e=F[T].shift(),t=e[0],n=e[1],i=e[2],r=e[3],o=e[4];if(r===void 0)G("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-r>=6e4){G("TIMEOUT",t.name,n);var a=n.pop();typeof a=="function"&&a.call(null,i)}else{var s=Date.now()-o,y=Math.max(o-r,1),f=Math.min(y*1.2,100);s>=f?(G("RETRY",t.name,n),t.apply(null,n.concat([r]))):F[T].push(e)}me===void 0&&(me=setTimeout(Te,0))}}(function(e){const t=x.fromCallback,n=ne,i=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof n[r]=="function");Object.assign(e,n),i.forEach(r=>{e[r]=t(n[r])}),e.exists=function(r,o){return typeof o=="function"?n.exists(r,o):new Promise(a=>n.exists(r,a))},e.read=function(r,o,a,s,y,f){return typeof f=="function"?n.read(r,o,a,s,y,f):new Promise((c,u)=>{n.read(r,o,a,s,y,(m,l,d)=>{if(m)return u(m);c({bytesRead:l,buffer:d})})})},e.write=function(r,o,...a){return typeof a[a.length-1]=="function"?n.write(r,o,...a):new Promise((s,y)=>{n.write(r,o,...a,(f,c,u)=>{if(f)return y(f);s({bytesWritten:c,buffer:u})})})},e.readv=function(r,o,...a){return typeof a[a.length-1]=="function"?n.readv(r,o,...a):new Promise((s,y)=>{n.readv(r,o,...a,(f,c,u)=>{if(f)return y(f);s({bytesRead:c,buffers:u})})})},e.writev=function(r,o,...a){return typeof a[a.length-1]=="function"?n.writev(r,o,...a):new Promise((s,y)=>{n.writev(r,o,...a,(f,c,u)=>{if(f)return y(f);s({bytesWritten:c,buffers:u})})})},typeof n.realpath.native=="function"?e.realpath.native=t(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(j);var We={},dt={};const pn=R;dt.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(pn.parse(t).root,""))){const i=new Error(`Path contains invalid characters: ${t}`);throw i.code="EINVAL",i}};const ht=j,{checkPath:wt}=dt,pt=e=>{const t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};We.makeDir=async(e,t)=>(wt(e),ht.mkdir(e,{mode:pt(t),recursive:!0}));We.makeDirSync=(e,t)=>(wt(e),ht.mkdirSync(e,{mode:pt(t),recursive:!0}));const Sn=x.fromPromise,{makeDir:vn,makeDirSync:Ee}=We,ke=Sn(vn);var B={mkdirs:ke,mkdirsSync:Ee,mkdirp:ke,mkdirpSync:Ee,ensureDir:ke,ensureDirSync:Ee};const gn=x.fromPromise,St=j;function $n(e){return St.access(e).then(()=>!0).catch(()=>!1)}var K={pathExists:gn($n),pathExistsSync:St.existsSync};const Z=j,bn=x.fromPromise;async function En(e,t,n){const i=await Z.open(e,"r+");let r=null;try{await Z.futimes(i,t,n)}finally{try{await Z.close(i)}catch(o){r=o}}if(r)throw r}function kn(e,t,n){const i=Z.openSync(e,"r+");return Z.futimesSync(i,t,n),Z.closeSync(i)}var vt={utimesMillis:bn(En),utimesMillisSync:kn};const ee=j,D=R,Ue=x.fromPromise;function Fn(e,t,n){const i=n.dereference?r=>ee.stat(r,{bigint:!0}):r=>ee.lstat(r,{bigint:!0});return Promise.all([i(e),i(t).catch(r=>{if(r.code==="ENOENT")return null;throw r})]).then(([r,o])=>({srcStat:r,destStat:o}))}function Pn(e,t,n){let i;const r=n.dereference?a=>ee.statSync(a,{bigint:!0}):a=>ee.lstatSync(a,{bigint:!0}),o=r(e);try{i=r(t)}catch(a){if(a.code==="ENOENT")return{srcStat:o,destStat:null};throw a}return{srcStat:o,destStat:i}}async function xn(e,t,n,i){const{srcStat:r,destStat:o}=await Fn(e,t,i);if(o){if(fe(r,o)){const a=D.basename(e),s=D.basename(t);if(n==="move"&&a!==s&&a.toLowerCase()===s.toLowerCase())return{srcStat:r,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!r.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(r.isDirectory()&&Ne(e,t))throw new Error(pe(e,t,n));return{srcStat:r,destStat:o}}function On(e,t,n,i){const{srcStat:r,destStat:o}=Pn(e,t,i);if(o){if(fe(r,o)){const a=D.basename(e),s=D.basename(t);if(n==="move"&&a!==s&&a.toLowerCase()===s.toLowerCase())return{srcStat:r,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!r.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(r.isDirectory()&&Ne(e,t))throw new Error(pe(e,t,n));return{srcStat:r,destStat:o}}async function gt(e,t,n,i){const r=D.resolve(D.dirname(e)),o=D.resolve(D.dirname(n));if(o===r||o===D.parse(o).root)return;let a;try{a=await ee.stat(o,{bigint:!0})}catch(s){if(s.code==="ENOENT")return;throw s}if(fe(t,a))throw new Error(pe(e,n,i));return gt(e,t,o,i)}function $t(e,t,n,i){const r=D.resolve(D.dirname(e)),o=D.resolve(D.dirname(n));if(o===r||o===D.parse(o).root)return;let a;try{a=ee.statSync(o,{bigint:!0})}catch(s){if(s.code==="ENOENT")return;throw s}if(fe(t,a))throw new Error(pe(e,n,i));return $t(e,t,o,i)}function fe(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Ne(e,t){const n=D.resolve(e).split(D.sep).filter(r=>r),i=D.resolve(t).split(D.sep).filter(r=>r);return n.every((r,o)=>i[o]===r)}function pe(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var re={checkPaths:Ue(xn),checkPathsSync:On,checkParentPaths:Ue(gt),checkParentPathsSync:$t,isSrcSubdir:Ne,areIdentical:fe};const W=j,ae=R,{mkdirs:Dn}=B,{pathExists:Cn}=K,{utimesMillis:In}=vt,ce=re;async function _n(e,t,n={}){typeof n=="function"&&(n={filter:n}),n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:i,destStat:r}=await ce.checkPaths(e,t,"copy",n);if(await ce.checkParentPaths(e,i,t,"copy"),!await bt(e,t,n))return;const a=ae.dirname(t);await Cn(a)||await Dn(a),await Et(r,e,t,n)}async function bt(e,t,n){return n.filter?n.filter(e,t):!0}async function Et(e,t,n,i){const o=await(i.dereference?W.stat:W.lstat)(t);if(o.isDirectory())return Ln(o,e,t,n,i);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Tn(o,e,t,n,i);if(o.isSymbolicLink())return Mn(e,t,n,i);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function Tn(e,t,n,i,r){if(!t)return Ve(e,n,i,r);if(r.overwrite)return await W.unlink(i),Ve(e,n,i,r);if(r.errorOnExist)throw new Error(`'${i}' already exists`)}async function Ve(e,t,n,i){if(await W.copyFile(t,n),i.preserveTimestamps){Wn(e.mode)&&await Nn(n,e.mode);const r=await W.stat(t);await In(n,r.atime,r.mtime)}return W.chmod(n,e.mode)}function Wn(e){return(e&128)===0}function Nn(e,t){return W.chmod(e,t|128)}async function Ln(e,t,n,i,r){t||await W.mkdir(i);const o=await W.readdir(n);await Promise.all(o.map(async a=>{const s=ae.join(n,a),y=ae.join(i,a);if(!await bt(s,y,r))return;const{destStat:c}=await ce.checkPaths(s,y,"copy",r);return Et(c,s,y,r)})),t||await W.chmod(i,e.mode)}async function Mn(e,t,n,i){let r=await W.readlink(t);if(i.dereference&&(r=ae.resolve(process.cwd(),r)),!e)return W.symlink(r,n);let o=null;try{o=await W.readlink(n)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return W.symlink(r,n);throw a}if(i.dereference&&(o=ae.resolve(process.cwd(),o)),ce.isSrcSubdir(r,o))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${o}'.`);if(ce.isSrcSubdir(o,r))throw new Error(`Cannot overwrite '${o}' with '${r}'.`);return await W.unlink(n),W.symlink(r,n)}var jn=_n;const L=ne,se=R,An=B.mkdirsSync,Rn=vt.utimesMillisSync,le=re;function qn(e,t,n){typeof n=="function"&&(n={filter:n}),n=n||{},n.clobber="clobber"in n?!!n.clobber:!0,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:i,destStat:r}=le.checkPathsSync(e,t,"copy",n);if(le.checkParentPathsSync(e,i,t,"copy"),n.filter&&!n.filter(e,t))return;const o=se.dirname(t);return L.existsSync(o)||An(o),kt(r,e,t,n)}function kt(e,t,n,i){const o=(i.dereference?L.statSync:L.lstatSync)(t);if(o.isDirectory())return Yn(o,e,t,n,i);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Jn(o,e,t,n,i);if(o.isSymbolicLink())return Qn(e,t,n,i);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Jn(e,t,n,i,r){return t?Bn(e,n,i,r):Ft(e,n,i,r)}function Bn(e,t,n,i){if(i.overwrite)return L.unlinkSync(n),Ft(e,t,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}function Ft(e,t,n,i){return L.copyFileSync(t,n),i.preserveTimestamps&&zn(e.mode,t,n),Le(n,e.mode)}function zn(e,t,n){return Hn(e)&&Un(n,e),Vn(t,n)}function Hn(e){return(e&128)===0}function Un(e,t){return Le(e,t|128)}function Le(e,t){return L.chmodSync(e,t)}function Vn(e,t){const n=L.statSync(e);return Rn(t,n.atime,n.mtime)}function Yn(e,t,n,i,r){return t?Pt(n,i,r):Gn(e.mode,n,i,r)}function Gn(e,t,n,i){return L.mkdirSync(n),Pt(t,n,i),Le(n,e)}function Pt(e,t,n){L.readdirSync(e).forEach(i=>Kn(i,e,t,n))}function Kn(e,t,n,i){const r=se.join(t,e),o=se.join(n,e);if(i.filter&&!i.filter(r,o))return;const{destStat:a}=le.checkPathsSync(r,o,"copy",i);return kt(a,r,o,i)}function Qn(e,t,n,i){let r=L.readlinkSync(t);if(i.dereference&&(r=se.resolve(process.cwd(),r)),e){let o;try{o=L.readlinkSync(n)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return L.symlinkSync(r,n);throw a}if(i.dereference&&(o=se.resolve(process.cwd(),o)),le.isSrcSubdir(r,o))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${o}'.`);if(le.isSrcSubdir(o,r))throw new Error(`Cannot overwrite '${o}' with '${r}'.`);return Xn(r,n)}else return L.symlinkSync(r,n)}function Xn(e,t){return L.unlinkSync(t),L.symlinkSync(e,t)}var Zn=qn;const er=x.fromPromise;var Me={copy:er(jn),copySync:Zn};const xt=ne,tr=x.fromCallback;function nr(e,t){xt.rm(e,{recursive:!0,force:!0},t)}function rr(e){xt.rmSync(e,{recursive:!0,force:!0})}var Se={remove:tr(nr),removeSync:rr};const ir=x.fromPromise,Ot=j,Dt=R,Ct=B,It=Se,Ye=ir(async function(t){let n;try{n=await Ot.readdir(t)}catch{return Ct.mkdirs(t)}return Promise.all(n.map(i=>It.remove(Dt.join(t,i))))});function Ge(e){let t;try{t=Ot.readdirSync(e)}catch{return Ct.mkdirsSync(e)}t.forEach(n=>{n=Dt.join(e,n),It.removeSync(n)})}var or={emptyDirSync:Ge,emptydirSync:Ge,emptyDir:Ye,emptydir:Ye};const ar=x.fromPromise,_t=R,z=j,Tt=B;async function cr(e){let t;try{t=await z.stat(e)}catch{}if(t&&t.isFile())return;const n=_t.dirname(e);let i=null;try{i=await z.stat(n)}catch(r){if(r.code==="ENOENT"){await Tt.mkdirs(n),await z.writeFile(e,"");return}else throw r}i.isDirectory()?await z.writeFile(e,""):await z.readdir(n)}function sr(e){let t;try{t=z.statSync(e)}catch{}if(t&&t.isFile())return;const n=_t.dirname(e);try{z.statSync(n).isDirectory()||z.readdirSync(n)}catch(i){if(i&&i.code==="ENOENT")Tt.mkdirsSync(n);else throw i}z.writeFileSync(e,"")}var lr={createFile:ar(cr),createFileSync:sr};const ur=x.fromPromise,Wt=R,U=j,Nt=B,{pathExists:fr}=K,{areIdentical:Lt}=re;async function yr(e,t){let n;try{n=await U.lstat(t)}catch{}let i;try{i=await U.lstat(e)}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}if(n&&Lt(i,n))return;const r=Wt.dirname(t);await fr(r)||await Nt.mkdirs(r),await U.link(e,t)}function mr(e,t){let n;try{n=U.lstatSync(t)}catch{}try{const o=U.lstatSync(e);if(n&&Lt(o,n))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}const i=Wt.dirname(t);return U.existsSync(i)||Nt.mkdirsSync(i),U.linkSync(e,t)}var dr={createLink:ur(yr),createLinkSync:mr};const V=R,oe=j,{pathExists:hr}=K,wr=x.fromPromise;async function pr(e,t){if(V.isAbsolute(e)){try{await oe.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:e}}const n=V.dirname(t),i=V.join(n,e);if(await hr(i))return{toCwd:i,toDst:e};try{await oe.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:V.relative(n,e)}}function Sr(e,t){if(V.isAbsolute(e)){if(!oe.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const n=V.dirname(t),i=V.join(n,e);if(oe.existsSync(i))return{toCwd:i,toDst:e};if(!oe.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:V.relative(n,e)}}var vr={symlinkPaths:wr(pr),symlinkPathsSync:Sr};const Mt=j,gr=x.fromPromise;async function $r(e,t){if(t)return t;let n;try{n=await Mt.lstat(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}function br(e,t){if(t)return t;let n;try{n=Mt.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}var Er={symlinkType:gr($r),symlinkTypeSync:br};const kr=x.fromPromise,jt=R,J=j,{mkdirs:Fr,mkdirsSync:Pr}=B,{symlinkPaths:xr,symlinkPathsSync:Or}=vr,{symlinkType:Dr,symlinkTypeSync:Cr}=Er,{pathExists:Ir}=K,{areIdentical:At}=re;async function _r(e,t,n){let i;try{i=await J.lstat(t)}catch{}if(i&&i.isSymbolicLink()){const[s,y]=await Promise.all([J.stat(e),J.stat(t)]);if(At(s,y))return}const r=await xr(e,t);e=r.toDst;const o=await Dr(r.toCwd,n),a=jt.dirname(t);return await Ir(a)||await Fr(a),J.symlink(e,t,o)}function Tr(e,t,n){let i;try{i=J.lstatSync(t)}catch{}if(i&&i.isSymbolicLink()){const s=J.statSync(e),y=J.statSync(t);if(At(s,y))return}const r=Or(e,t);e=r.toDst,n=Cr(r.toCwd,n);const o=jt.dirname(t);return J.existsSync(o)||Pr(o),J.symlinkSync(e,t,n)}var Wr={createSymlink:kr(_r),createSymlinkSync:Tr};const{createFile:Ke,createFileSync:Qe}=lr,{createLink:Xe,createLinkSync:Ze}=dr,{createSymlink:et,createSymlinkSync:tt}=Wr;var Nr={createFile:Ke,createFileSync:Qe,ensureFile:Ke,ensureFileSync:Qe,createLink:Xe,createLinkSync:Ze,ensureLink:Xe,ensureLinkSync:Ze,createSymlink:et,createSymlinkSync:tt,ensureSymlink:et,ensureSymlinkSync:tt};function Lr(e,{EOL:t=`
`,finalEOL:n=!0,replacer:i=null,spaces:r}={}){const o=n?t:"";return JSON.stringify(e,i,r).replace(/\n/g,t)+o}function Mr(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var je={stringify:Lr,stripBom:Mr};let te;try{te=ne}catch{te=ft}const ve=x,{stringify:Rt,stripBom:qt}=je;async function jr(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||te,i="throws"in t?t.throws:!0;let r=await ve.fromCallback(n.readFile)(e,t);r=qt(r);let o;try{o=JSON.parse(r,t?t.reviver:null)}catch(a){if(i)throw a.message=`${e}: ${a.message}`,a;return null}return o}const Ar=ve.fromPromise(jr);function Rr(e,t={}){typeof t=="string"&&(t={encoding:t});const n=t.fs||te,i="throws"in t?t.throws:!0;try{let r=n.readFileSync(e,t);return r=qt(r),JSON.parse(r,t.reviver)}catch(r){if(i)throw r.message=`${e}: ${r.message}`,r;return null}}async function qr(e,t,n={}){const i=n.fs||te,r=Rt(t,n);await ve.fromCallback(i.writeFile)(e,r,n)}const Jr=ve.fromPromise(qr);function Br(e,t,n={}){const i=n.fs||te,r=Rt(t,n);return i.writeFileSync(e,r,n)}const zr={readFile:Ar,readFileSync:Rr,writeFile:Jr,writeFileSync:Br};var Hr=zr;const de=Hr;var Ur={readJson:de.readFile,readJsonSync:de.readFileSync,writeJson:de.writeFile,writeJsonSync:de.writeFileSync};const Vr=x.fromPromise,xe=j,Jt=R,Bt=B,Yr=K.pathExists;async function Gr(e,t,n="utf-8"){const i=Jt.dirname(e);return await Yr(i)||await Bt.mkdirs(i),xe.writeFile(e,t,n)}function Kr(e,...t){const n=Jt.dirname(e);xe.existsSync(n)||Bt.mkdirsSync(n),xe.writeFileSync(e,...t)}var Ae={outputFile:Vr(Gr),outputFileSync:Kr};const{stringify:Qr}=je,{outputFile:Xr}=Ae;async function Zr(e,t,n={}){const i=Qr(t,n);await Xr(e,i,n)}var ei=Zr;const{stringify:ti}=je,{outputFileSync:ni}=Ae;function ri(e,t,n){const i=ti(t,n);ni(e,i,n)}var ii=ri;const oi=x.fromPromise,M=Ur;M.outputJson=oi(ei);M.outputJsonSync=ii;M.outputJSON=M.outputJson;M.outputJSONSync=M.outputJsonSync;M.writeJSON=M.writeJson;M.writeJSONSync=M.writeJsonSync;M.readJSON=M.readJson;M.readJSONSync=M.readJsonSync;var ai=M;const ci=j,nt=R,{copy:si}=Me,{remove:zt}=Se,{mkdirp:li}=B,{pathExists:ui}=K,rt=re;async function fi(e,t,n={}){const i=n.overwrite||n.clobber||!1,{srcStat:r,isChangingCase:o=!1}=await rt.checkPaths(e,t,"move",n);await rt.checkParentPaths(e,r,t,"move");const a=nt.dirname(t);return nt.parse(a).root!==a&&await li(a),yi(e,t,i,o)}async function yi(e,t,n,i){if(!i){if(n)await zt(t);else if(await ui(t))throw new Error("dest already exists.")}try{await ci.rename(e,t)}catch(r){if(r.code!=="EXDEV")throw r;await mi(e,t,n)}}async function mi(e,t,n){return await si(e,t,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),zt(e)}var di=fi;const Ht=ne,Oe=R,hi=Me.copySync,Ut=Se.removeSync,wi=B.mkdirpSync,it=re;function pi(e,t,n){n=n||{};const i=n.overwrite||n.clobber||!1,{srcStat:r,isChangingCase:o=!1}=it.checkPathsSync(e,t,"move",n);return it.checkParentPathsSync(e,r,t,"move"),Si(t)||wi(Oe.dirname(t)),vi(e,t,i,o)}function Si(e){const t=Oe.dirname(e);return Oe.parse(t).root===t}function vi(e,t,n,i){if(i)return Fe(e,t,n);if(n)return Ut(t),Fe(e,t,n);if(Ht.existsSync(t))throw new Error("dest already exists.");return Fe(e,t,n)}function Fe(e,t,n){try{Ht.renameSync(e,t)}catch(i){if(i.code!=="EXDEV")throw i;return gi(e,t,n)}}function gi(e,t,n){return hi(e,t,{overwrite:n,errorOnExist:!0,preserveTimestamps:!0}),Ut(e)}var $i=pi;const bi=x.fromPromise;var Ei={move:bi(di),moveSync:$i},Vt={...j,...Me,...or,...Nr,...ai,...B,...Ei,...Ae,...K,...Se};const{dialog:Yt}=require("electron"),ki=require("path"),Fi=async()=>await Yt.showOpenDialog({title:"选择一个文件",buttonLabel:"确认选择",filters:[{name:"应用/文件",extensions:[]}]}),Pi=async(e,t)=>{let n=await xi();n==""&&n==null||Vt.writeJsonSync(ki.join(n,`${e}.json`),t)},xi=async()=>await Yt.showOpenDialog({properties:["openDirectory"]}).then(t=>{if(!t.canceled)return t.filePaths[0]}).catch(t=>{console.error(t)}),Oi=require("os"),Di=require("path"),Ci=require("crypto"),Ii=require("pngparse"),_i=require("sharp"),Ti=require("fs-extra"),w=class{static generateTemFile(t){let n=Ci.createHash("md5").update("angular-tmp-img").digest("hex")+".bmp",i=Di.join(Oi.tmpdir(),n),r=Buffer.from(t.replace(/^data:image\/\w+;base64,/,""),"base64");return Ti.writeFileSync(i,r),i}static convert(t,n){let i=this;i.pngtolcd(t,function(r,o){r?n(r,null):n(null,i.configArray[3]==0?i.hex2hex(o.toString("hex")):o)})}};w.generate=(e,t,n)=>(w.configArray=n,w.threshold=t,new Promise((i,r)=>{w.convert(w.generateTemFile(e),function(o,a){o?r(o):i(a)})}));w.pngtolcd=(e,t)=>{let n=w;Ii.parseFile(e,function(i,r){if(i){let a=n.imgFileToBuffer(e);return t(null,a)}let o=n.imageDataToHexArray(r);t(null,o)})};w.imgFileToBuffer=e=>{_i(e).toBuffer().then(t=>t)};w.imageDataToHexArray=e=>{const t=w.createImageDate(e);let n=t.data,i=t.height,r=t.width,o=n.length;if(w.configArray[4]==1){let a=w.threshold,s=[],y=4,f;for(let c=0;c<o;c+=y)f=n[c+1]=n[c+2]=n[c],f>a?f=1:f=0,s[c/y]=f;return w.imageSamplingArr[w.configArray[1]](s,r,i)}else return w.colorImageSampling(n,r,i)};w.colorImageSampling=(e,t,n)=>{const i=Buffer.alloc(t*n*2);let r=0,o=0;for(;r<i.length&&o<e.length;)i[r]|=e[o]>>3<<3,i[r]|=e[o+1]>>5,i[r+1]|=e[o+1]>>2<<5,i[r+1]|=e[o+2]>>3,(w.configArray[0]==0||w.configArray[2]==1)&&(i[r]=~i[r],i[r+1]=~i[r+1]),r+=2,o+=4;return i};w.ImageSamplingRow=(e,t,n)=>{const i=Buffer.alloc(t*n/8);for(let r=0;r<e.length;r++){let o=Math.floor(r%t),a=Math.floor(r/t),s=0,y=a,f=1<<o%8;w.configArray[2]!=0&&(f=1<<7-o%8),s=y*Math.floor(t/8)+Math.floor(o/8),w.configArray[0]!==0&&(e[r]===0?e[r]=1:e[r]=0),e[r]===0?i[s]|=f:i[s]&=~f}return i};w.ImageSamplingCol=(e,t,n)=>{const i=Buffer.alloc(t*n/8);for(let r=0;r<e.length;r++){let o=Math.floor(r%t),a=Math.floor(r/t),s=0,y=o,f=1<<a%8;w.configArray[2]!=0&&(f=1<<7-a%8),s=y*Math.floor(n/8)+Math.floor(a/8),w.configArray[0]!==0&&(e[r]===0?e[r]=1:e[r]=0),e[r]===0?i[s]|=f:i[s]&=~f}return i};w.ImageSamplingColRow=(e,t,n)=>{const i=Buffer.alloc(t*n/8);for(let r=0;r<e.length;r++){let o=Math.floor(r%t),a=Math.floor(r/t),s=0,y=Math.floor(a/8),f=1<<a-8*y;w.configArray[2]!=0&&(f=1<<7-(a-8*y)),y===0?s=o:s=o+t*y,w.configArray[0]!==0&&(e[r]===0?e[r]=1:e[r]=0),e[r]===0?i[s]|=f:i[s]&=~f}return i};w.ImageSamplingRowCol=(e,t,n)=>{const i=Buffer.alloc(t*n/8);for(let r=0;r<e.length;r++){let o=Math.floor(r%t),a=Math.floor(r/t),s=0,y=Math.floor(o/8),f=1<<o%8;w.configArray[2]!=0&&(f=1<<7-o%8),s=y*n+a,w.configArray[0]!==0&&(e[r]===0?e[r]=1:e[r]=0),e[r]===0?i[s]|=f:i[s]&=~f}return i};w.imageSamplingArr=[w.ImageSamplingRow,w.ImageSamplingCol,w.ImageSamplingColRow,w.ImageSamplingRowCol];w.createImageDate=e=>{let t=Buffer.alloc(e.width*e.height*4);for(let n=0,i=0;n<e.height;n++)for(let r=0;r<e.width;r++)t.writeUInt32BE(w.getPixel(e,r,n),i),i+=4;return e.data.set(t),e};w.getPixel=(e,t,n)=>{if(t=t|0,n=n|0,t<0||n<0||t>=e.width||n>=e.height)return 0;let i=(n*e.width+t)*e.channels,r,o,a,s;switch(e.channels){case 1:r=o=a=e.data[i],s=255;break;case 2:r=o=a=e.data[i],s=e.data[i+1];break;case 3:r=e.data[i],o=e.data[i+1],a=e.data[i+2],s=255;break;case 4:r=e.data[i],o=e.data[i+1],a=e.data[i+2],s=e.data[i+3];break}return(r<<24|o<<16|a<<8|s)>>>0};w.hex2hex=e=>{for(var t=[],n=0;n<e.length;n+=2)t.push("0x"+e.substr(n,2));return t};w.pngtohexarray=(e,t)=>{w.pngtolcd(e,function(n,i){n?t(n,null):t(null,this.hex2hex(i.toString("hex")))})};let Wi=w;const{ipcMain:ot}=require("electron"),at=require("sharp"),ct=require("crypto"),st=require("os"),Ni=require("fs-extra"),lt=require("path");let De="";const Li=async(e,t,n,i)=>{if(e==0||t==0)return;let r=ct.createHash("md5").update("angular-cir-img").digest("hex")+".bmp",o=lt.join(st.tmpdir(),r),a=Buffer.from(n.replace(/^data:image\/\w+;base64,/,""),"base64");Ni.writeFileSync(o,a),lt.join(st.tmpdir(),ct.createHash("md5").update("angular-cir-img-zoom").digest("hex")+".bmp"),i?at(o).resize(e,t).greyscale().toBuffer().then(s=>{De=s.toString("base64")}):at(o).resize(e,t).toBuffer().then(s=>{De=s.toString("base64")})},Mi=()=>{ot.handle("pic-data-editor",async(e,t,n,i,r)=>(Li(t,n,i,r),await new Promise(o=>setTimeout(o,700)),De)),ot.handle("pic-data-parse",async(e,t,n,...i)=>await Wi.generate(t,n,i))},ji=require("electron-store"),Re=new ji,Ai=(e,t)=>{Re.set(e,t)},Ri=e=>Re.get(e),qi=e=>{Re.delete(e)},Ji=e=>Vt.readJsonSync(R.join(__dirname,`../../dist/shortcuts/${e}`)),Bi=async()=>{X.ipcMain.handle("get-shortcut",async(e,t)=>await Ji(t))},{app:ue,protocol:zi,BrowserWindow:Ce,ipcMain:Y,dialog:Yi,shell:Hi}=require("electron");require("path");en();Mi();Bi();Y.on("set-item",(e,t,n)=>{Ai(t,n)});Y.on("del-item",(e,t)=>{qi(t)});Y.handle("get-item",async(e,t)=>await Ri(t));Y.on("latest-download",(e,t)=>{Hi.openExternal(t)});Y.on("window-create",(e,t,n)=>{new yt().createWindow(t,n)});Y.handle("write-config",async(e,t,n)=>await Pi(t,n));Y.handle("select-file",async()=>await Fi());Y.on("store-set",(e,t)=>{for(const n of Ce.getAllWindows())n!=Ce.fromWebContents(e.sender)&&n.webContents.send("store-get",t)});const ut=async()=>{new yt().createWindow({route:"/home",isMainWin:!0},{width:999,height:773,minWidth:688,minHeight:560})};ue.commandLine.appendSwitch("--ignore-certificate-errors","true");zi.registerSchemesAsPrivileged([{scheme:"app",privileges:{secure:!0,standard:!0}}]);ue.whenReady().then(()=>{ut(),ue.on("activate",()=>{Ce.getAllWindows().length===0&&ut()})});ue.on("window-all-closed",()=>{process.platform!=="darwin"&&ue.quit()});
